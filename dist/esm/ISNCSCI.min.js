var e=["C5","C6","C7","C8","T1","L2","L3","L4","L5","S1"],r=["C1","C2","C3","C4","C5","C6","C7","C8","T1","T2","T3","T4","T5","T6","T7","T8","T9","T10","T11","T12","L1","L2","L3","L4","L5","S1","S2","S3","S4_5"],n=function(e){return["0","1","0*","1*"].includes(e)},i=function(e){return["0**","1**"].includes(e)},t=function(e){return["2","NT","NT**"].includes(e)},l=function(e,r,l,u){if("C1"===l)throw"invalid arguments level: "+r+" nextLevel: "+l;if("2"===e.lightTouch[l]&&"2"===e.pinPrick[l])return{continue:!0,variable:u};if(n(e.lightTouch[l])||n(e.pinPrick[l]))return{continue:!1,level:r+(u?"*":""),variable:u};if([e.lightTouch[l],e.pinPrick[l]].includes("NT*"))return{continue:!1,level:r+"*",variable:!0};if("NT"===e.lightTouch[l]||"NT"===e.pinPrick[l]){if(i(e.lightTouch[l])||i(e.pinPrick[l]))return{continue:!0,level:r+(u?"*":""),variable:!0};if(t(e.lightTouch[l])||t(e.pinPrick[l]))return{continue:!0,level:r+(u?"*":""),variable:u};throw""}return{continue:!0,variable:!0}},u=function(e){for(var n=[],i=!1,t=0;t<r.length;t++){var u=r[t],o=r[t+1];if(o){var a=l(e,u,o,i);if(i=i||!!a.variable,a.level&&n.push(a.level),a.continue)continue;break}n.push("INT"+(i?"*":""))}return n.join(",")},o=function(e){return["0","NT","0*","NT*"].includes(e)},a=function(e){return["2","NT**","0**","1**"].includes(e)},c=function(e,n,i){return e>=r.indexOf(n)&&e<=r.indexOf(i)},v=function(e,r,n,i){if(["0","1","2"].includes(e.motor[r]))throw new Error("Invalid motor value at current level");var t={continue:!1,variable:i};return["0","1","2"].includes(e.motor[r])||["0*","1*","2*","NT*","3","4","3*","4*"].includes(e.motor[r])||["0","1","2"].includes(e.motor[n])||(t.continue=!0),["5","0**","1**","2**","3**","4**","NT**"].includes(e.motor[r])&&!["0","1","2","0*","1*","2*","NT","NT*"].includes(e.motor[n])||(["0*","1*","2*","NT*"].includes(e.motor[r])||["0**","1**","2**"].includes(e.motor[r])&&["0*","1*","2*","NT","NT*"].includes(e.motor[n])?t.level=r+"*":t.level=r+(i?"*":"")),["5","3","4","3*","4*","NT"].includes(e.motor[r])?"5"===e.motor[r]&&["0**","1**","2**"].includes(e.motor[n])&&(t.variable=!0):["0**","1**","2**","3**","4**","NT**"].includes(e.motor[r])&&["0","1","2"].includes(e.motor[n])||(t.variable=!0),t},f=function(e,r,n,i){return{continue:!["0","1","2"].includes(e.motor[n]),level:["0","1","2","0*","1*","2*","NT","NT*"].includes(e.motor[n])?r+(i?"*":""):void 0,variable:i||["0**","1**","2**"].includes(e.motor[n])}},s=function(e,n,i){if(["0","1","2"].includes(e.motor[n]))throw new Error("Invalid motor value at current level");return function(e,r,n,i){var t={continue:!0,variable:n};return!["3","4","0*","1*","2*","3*","4*","NT*"].includes(e.motor[r])&&i.continue||(t.continue=!1),"NT"!==e.motor[r]&&["5","0**","1**","2**","3**","4**","NT**"].includes(e.motor[r])&&i.continue&&!i.level||(["0*","1*","2*","NT*"].includes(e.motor[r])||["0**","1**","2**"].includes(e.motor[r])&&(i.level||!i.continue)?t.level=r+"*":t.level=r+(n?"*":"")),(["0*","1*","2*","NT*","0**","1**","2**"].includes(e.motor[r])||["3**","4**","NT**"].includes(e.motor[r])&&i.continue||["5","NT"].includes(e.motor[r])&&i.continue&&i.variable&&!i.level)&&(t.variable=!0),t}(e,n,i,function(e,n){for(var i=r.indexOf(n)-1,t={continue:!0,variable:!1},u=i;u<=i+5;u++){var o=r[u],a=r[u+1],c=l(e,o,a,!1);!1===c.continue&&(t.continue=!1),c.level&&(t.level=c.level),c.variable&&(t.variable=!0)}return t}(e,"T1"===n?"C5":"L2"))},h=function(n){for(var i,t,u,o=[],a=!1,h=0;h<r.length;h++){if(i=r[h],t=r[h+1],c(h,"C1","C3")||c(h,"T2","T12")||c(h,"S2","S3"))u=l(n,i,t,a);else if("C4"===i||"L1"===i)u=f(n,i,t="C4"===i?"C5":"L2",a);else if(c(h,"C5","C8")||c(h,"L2","L5")){var T=h-(c(h,"C5","C8")?4:16);i=e[T],t=e[T+1],u=v(n,i,t,a)}else u="T1"===i||"S1"===i?s(n,i,a):{continue:!1,level:"INT"+(a?"*":""),variable:a};if(a=a||u.variable,u.level&&o.push(u.level),!u.continue)return o.join(",")}return o.join(",")};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function T(){for(var e=0,r=0,n=arguments.length;r<n;r++)e+=arguments[r].length;var i=Array(e),t=0;for(r=0;r<n;r++)for(var l=arguments[r],u=0,o=l.length;u<o;u++,t++)i[t]=l[u];return i}var d=function(e){return"0"===e},p=function(e,r,n){if("C1"===r)throw"invalid argument level: "+r;var i=d(e.pinPrick[r]),t=d(e.lightTouch[r]);if(i&&t)return{continue:!0,variable:n};if(o(e.pinPrick[r])&&o(e.lightTouch[r])){var l=[e.pinPrick[r],e.lightTouch[r]].some((function(e){return["NT","NT*"].includes(e)}));return l?{continue:!0,level:r+(n?"*":""),variable:n}:{continue:!0,level:r+"*",variable:n||!l}}return{continue:!1,level:r+(n?"*":""),variable:n}},g=function(e,n){var i=[],t=!1;if(("No"===n||"NT"===n)&&o(e.lightTouch.S4_5)&&o(e.pinPrick.S4_5)){var l=p(e,"S4_5",t);"NT"!==n&&("No"!==n||l.continue&&void 0===l.level)||i.push("NA");for(var u=[],a=r.indexOf("S3");a>=0;a--){var c=r[a];if(a>0){var v=p(e,c,t);if(t=t||v.variable,v.level&&u.unshift(v.level),v.continue)continue;break}u.unshift(c)}return(i=T(i,u)).join(",")}return"NA"},N=function(e){return["5","NT","0**","1**","2**","3**","4**","NT**"].includes(e)},b=function(e){return["2","NT","0**","1**","NT**"].includes(e)},m=function(e,r,n){var i={continue:!0,variable:n};return"0"===e.motor[r]?i:(["0*","NT","NT*"].includes(e.motor[r])||(i.continue=!1),["0*","0**"].includes(e.motor[r])?i.level=r+"*":i.level=r+(n?"*":""),["0*","0**"].includes(e.motor[r])&&(i.variable=!0),i)},C=function(e,r,n,i,t,l){if("C1"===r)throw"invalid argument level: "+r;var u={continue:!0,variable:!1},o=b(e.lightTouch[r]),a=b(e.pinPrick[r]);return o&&a?t?((i||l||"NT"===e.lightTouch[r]||"NT"===e.pinPrick[r])&&(u.level=r+(n?"*":""),i&&"NT"!==e.lightTouch[r]&&"NT"!==e.pinPrick[r]&&(u.continue=!1)),u):"NT"!==e.lightTouch[r]||"NT"!==e.pinPrick[r]?{continue:!0,variable:n}:"NT"===e.lightTouch[r]||"NT"===e.pinPrick[r]?{continue:!0,level:r+(n?"*":""),variable:n}:{continue:!1,level:r+(n?"*":""),variable:n}:{continue:!0,variable:n}},S=function(n,i){var t,l,u;switch(i){case"upper":t=e.indexOf("C5"),l=r.indexOf("C5");break;case"lower":t=e.indexOf("L2"),l=r.indexOf("L2");break;default:throw"invalid option"}for(var o=t;o<t+5;o++){var c=e[o];if(u=n.motor[c],!["5","0**","1**","2**","3**","4**","NT**"].includes(u))return!1}for(o=l;o<l+5;o++){if("C1"===(c=r[o])||!a(n.pinPrick[c])||!a(n.lightTouch[c]))return!1}return!0},k=function(n,i){var t,l;switch(i){case"upper":t=e.indexOf("C5"),l=r.indexOf("C5");break;case"lower":t=e.indexOf("L2"),l=r.indexOf("L2");break;default:throw"invalid option"}for(var u=t;u<t+5;u++){var o=e[u];if(!N(n.motor[o]))return!1}for(u=l;u<l+5;u++){if("C1"===(o=r[u])||!b(n.pinPrick[o])||!b(n.lightTouch[o]))return!1}return!0},P=function(r,n){var i,t;switch(n){case"upper":i=e.indexOf("C5");break;case"lower":i=e.indexOf("L2");break;default:throw"invalid option"}for(var l=i;l<i+5;l++){var u=e[l];if(t=r.motor[u],!["0","0*","NT","NT*"].includes(t))return!1}return!0},x=function(r,n){var i;switch(n){case"upper":i=e.indexOf("C5");break;case"lower":i=e.indexOf("L2");break;default:throw"invalid option"}for(var t=i;t<i+5;t++){var l=e[t];if(["0","1","2","3","4","0*","1*","2*","3*","4*"].includes(r.motor[l]))return!0}return!1},L=function(n,i,t,l){for(var u=-1,o=!1,a="upper"===l?e.indexOf("T1"):e.length-1,c="upper"===l?0:e.indexOf("L2"),v=a;v>=c;v--){var f=e[v];if(t=m(n,f,o),o=o||t.variable,t.level&&i.unshift(t.level),!t.continue){u=-1;break}u=r.indexOf(f)}return u},w=function(n,i){if("Yes"===i)return"NA";var t=[],l=function(n){for(var i={continue:!0,level:"S4_5",variable:!1},t=r.indexOf("C2");t<r.length;t++)if(c(t,"C5","T1")||c(t,"L2","S1")){var l=t-(c(t,"C5","T1")?4:16),u=e[l];if(("0**"===n.motor[u]||["0**","1**","NT**"].includes(n.lightTouch[u])||["0**","1**","NT**"].includes(n.pinPrick[u]))&&(i.variable=!0),!N(n.motor[u])||!b(n.lightTouch[u])||!b(n.pinPrick[u])){i.level=r[t-1];break}}else{if("C1"===(u=r[t]))throw"invalid argument level: "+u;if((["0**","1**","NT**"].includes(n.lightTouch[u])||["0**","1**","NT**"].includes(n.pinPrick[u]))&&(i.variable=!0),!b(n.lightTouch[u])||!b(n.pinPrick[u])){i.level=r[t-1];break}}return i}(n),u=S(n,"upper"),o=S(n,"lower"),a=k(n,"upper"),v=k(n,"lower"),f=P(n,"upper"),s=P(n,"lower"),h=[],d=void 0,p={continue:!0,variable:!1};if(("NT"===i||"No"===i&&"S4_5"===l.level)&&(t.push("NA"),p=C(n,"S4_5",!1,o,a&&v,!1)),n.lowestNonKeyMuscleWithMotorFunction&&function(e,n){if(n){var i=e.map((function(e){return r.indexOf(e.replace(/\*/,""))})),t=r.indexOf(n);return i.every((function(e){return e<=t}))}return!1}(h,n.lowestNonKeyMuscleWithMotorFunction))return n.lowestNonKeyMuscleWithMotorFunction;var g=function(n){for(var i=e.length-1;i>=0;i--){var t=e[i];if("0"!==n.motor[t])return"S1"===t?r.indexOf("S3"):"T1"===t?r.indexOf("L1"):r.indexOf(t)}return r.indexOf("S3")}(n),w=l.variable;(x(n,"lower")||x(n,"upper"))&&(g=L(n,h,p,"lower")),g>=0&&x(n,"upper")&&(g=L(n,h,p,"upper"));for(var O=g;O>=0&&p.continue;O--){if(d=r[O],c(O,"C2","C4"))(p=C(n,d,w,!0,!0,f)).level&&(f=!1);else if(c(O,"T2","L1"))(p=C(n,d,w,u,a,s)).level&&(s=!1);else if(c(O,"S2","S3"))p=C(n,d,w,o,a&&v,!1);else if(c(O,"C5","T1")||c(O,"L2","S1")){var y=O-(c(O,"C5","T1")?4:16);d=e[y],p=m(n,d,w)}else p={continue:!1,level:"C1",variable:!1};p.level&&h.unshift(p.level),w=w||p.variable}return(t=T(t,h.sort((function(e,n){return r.indexOf(e.replace(/\*/,""))-r.indexOf(n.replace(/\*/,""))})))).join(",")},O=function(e,r,n,i){var t;return(r.level||n.level)&&(t=r.level&&n.level&&r.level.includes("*")&&n.level.includes("*")?e+"*":e+(i?"*":"")),{continue:r.continue&&n.continue,level:t,variable:i||r.variable||n.variable}},y=function(n,i,t,l){if(t.continue){var u=r.indexOf(i),o=u-(c(u,"C4","T1")?4:16),a=e[o],s=e[o+1],h="C4"===i||"L1"===i?f(n.left,i,s,l):v(n.left,a,"T1"===i||"S1"===i?a:s,l),T="C4"===i||"L1"===i?f(n.left,i,s,l):v(n.right,a,"T1"===i||"S1"===i?a:s,l),d=void 0;return(h.level||T.level||t.level)&&(d=h.level&&T.level&&h.level.includes("*")&&T.level.includes("*")?i+"*":i+(l?"*":"")),{continue:h.continue&&T.continue,level:d,variable:l||t.variable||h.variable||T.variable}}return t},_=function(r){return c(r,"C2","C4")?0:c(r,"C5","T1")?r-4:c(r,"T2","L1")?5:c(r,"L2","S1")?r-16:e.length},A=function(e){var r=[e.right.lightTouch.S4_5,e.right.pinPrick.S4_5,e.left.lightTouch.S4_5,e.left.pinPrick.S4_5];return{result:"No"!==e.deepAnalPressure||"0"!==e.right.lightTouch.S4_5||"0"!==e.right.pinPrick.S4_5||"0"!==e.left.lightTouch.S4_5||"0"!==e.left.pinPrick.S4_5,variable:"No"===e.deepAnalPressure&&!r.every((function(e){return"0"===e}))&&r.every((function(e){return["0","0*","0**"].includes(e)}))}},I=function(n,i){for(var t,l=!1,u=0,o=i.split(",");u<o.length;u++){for(var a=o[u],c=r.indexOf(a.replace("*",""))+4,v=!0,f=_(c);f<e.length;f++){var s=e[f];if("0*"!==n[s]&&"0**"!==n[s]||(l=!0),t=n[s],!["0","NT","NT*","0*"].includes(t)){v=!1,"0*"===n[s]&&(l=!0);break}}if(v)return{result:!0,variable:l}}return{result:!1,variable:!1}},E=function(e,r){var n=A(e),i=function(e,r){var n=I(e.left.motor,r.motorLeft),i=I(e.right.motor,r.motorRight);return{result:"Yes"!==e.voluntaryAnalContraction&&i.result&&n.result,variable:"No"===e.voluntaryAnalContraction&&(n.variable||i.variable)}}(e,r);return{result:n.result&&i.result,variable:n.variable||i.variable}},j=function(e){return["0","1","2","NT","NT*"].includes(e)},D=function(e){return["0*","1*","2*"].includes(e)},M=function(n,i,t){var l=function(n,i){for(var t=0,l=i.replace(/\*/g,"").split(",");t<l.length;t++){for(var u=l[t],o=r.indexOf(u),a=_(o+1),c=e.length-a,v=0,f=0,s=a;s<e.length;s++){var h=e[s];if(j(n.left.motor[h])?v++:D(n.left.motor[h])&&(v++,f++),j(n.right.motor[h])?v++:D(n.right.motor[h])&&(v++,f++),v-f>c)return{result:!0,variable:!1}}if(v>c&&v-f<=c)return{result:!0,variable:!0}}return{result:!1,variable:!1}}(n,i);if(l.result)return l.variable||t.variable?"C*":"C"},R=function(e){return!["0","1","2"].includes(e)},Y=function(e){return["0*","1*","2*","0**","1**","2**"].includes(e)},F=function(n,i,t){var l=function(n,i){for(var t={result:!1,variable:!1},l=0,u=i.replace(/\*/g,"").split(",");l<u.length;l++){var o=u[l],a=r.indexOf(o),c=_(a+1),v=e.length-c;if(0===v)return{result:!0,variable:!1};for(var f=0,s=0,h=c;h<e.length;h++){var T=e[h];if(f+=R(n.left.motor[T])?1:0,f+=R(n.right.motor[T])?1:0,s+=Y(n.left.motor[T])?1:0,f-(s+=Y(n.right.motor[T])?1:0)>=v)return{result:!0,variable:!1}}f>=v&&(t.result=!0,t.variable=t.variable||f-s<v)}return t}(n,i);if(l.result)return l.variable||t.variable?"D*":"D"},K=function(n,i){for(var t=!1,l=0,u=i.split(",");l<u.length;l++)for(var o=u[l],a=r.indexOf(o.replace("*",""))+4,c=_(a);c<e.length;c++){var v=e[c];if("0**"===n[v]&&(t=!0),"0"!==n[v])return{result:!0,variable:t}}return{result:t,variable:t}},W=function(e,r,n,i){if("INT"===i)return"E";if("INT*"===i)return"E*";var t=[],l=function(e){if(function(e){return e.includes("C")}(e))return e.includes("*")?"A*":"A"}(r);l&&t.push(l);var u=function(e,r){var n=E(e,r);if(n.result)return n.variable?"B*":"B"}(e,n);u&&t.push(u);var o=function(e,r){var n={result:!1,variable:!1};if(function(e){return"No"!==e.voluntaryAnalContraction}(e))return n.result=!0,n;if(A(e).result){var i=K(e.right.motor,r.motorRight),t=K(e.left.motor,r.motorLeft);(i.result||t.result)&&(n.result=!0,(i.variable||t.variable)&&(n.variable=!0))}return n}(e,n);if(o.result){var a=M(e,i,o);a&&t.push(a);var c=F(e,i,o);c&&t.push(c)}var v=function(e){return e.includes("INT*")?"E*":e.includes("INT")?"E":void 0}(i);return v&&t.push(v),t.join(",")},B=function(e){var n=function(e){return{sensoryRight:u(e.right),sensoryLeft:u(e.left),motorRight:h(e.right),motorLeft:h(e.left)}}(e),i=function(e){for(var n=[],i=!1,t=0;t<r.length;t++){var u=r[t],o=r[t+1],a={continue:!0,variable:!1};if(o){var v=l(e.left,u,o,i),f=l(e.right,u,o,i);if(c(t,"C4","T1")||c(t,"L1","S1")){var s=O(u,v,f,i);a=y(e,u,s,i)}else a=O(u,v,f,i);if(i=i||a.variable,a.level&&n.push(a.level),!a.continue)break}else n.push("INT"+(i?"*":""))}return n.join(",")}(e),t=function(e){var r=o(e.right.lightTouch.S4_5),n=o(e.right.pinPrick.S4_5),i=o(e.left.lightTouch.S4_5),t=o(e.left.pinPrick.S4_5);if("Yes"!==e.voluntaryAnalContraction&&"Yes"!==e.deepAnalPressure&&r&&n&&i&&t){if("No"===e.voluntaryAnalContraction&&"No"===e.deepAnalPressure){if([e.right.lightTouch.S4_5,e.right.pinPrick.S4_5,e.left.lightTouch.S4_5,e.left.pinPrick.S4_5].every((function(e){return"0"===e})))return"C";if([e.right.lightTouch.S4_5,e.right.pinPrick.S4_5,e.left.lightTouch.S4_5,e.left.pinPrick.S4_5].every((function(e){return["0","0*"].includes(e)})))return"C*,I*"}return"C,I"}return"No"===e.voluntaryAnalContraction&&"No"===e.deepAnalPressure&&[e.right.lightTouch.S4_5,e.right.pinPrick.S4_5,e.left.lightTouch.S4_5,e.left.pinPrick.S4_5].every((function(e){return["0","0**"].includes(e)}))?"I*":"I"}(e);return{neurologicalLevels:n,neurologicalLevelOfInjury:i,injuryComplete:t,ASIAImpairmentScale:W(e,t,n,i),zoneOfPartialPreservations:function(e){return{sensoryRight:g(e.right,e.deepAnalPressure),sensoryLeft:g(e.left,e.deepAnalPressure),motorRight:w(e.right,e.voluntaryAnalContraction),motorLeft:w(e.left,e.voluntaryAnalContraction)}}(e)}},z=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(e.includes(NaN))throw e[e.indexOf(NaN)]+" is not a valid value";var n=e.reduce((function(e,r){return e+r}),0);return n.toString()},q=function(e,r){var n;if("all"===r?n=Object.values(e):"upper"===r?n=[e.C5,e.C6,e.C7,e.C8,e.T1]:"lower"===r&&(n=[e.L2,e.L3,e.L4,e.L5,e.S1]),!n)throw"option should be one of 'all' | 'upper' | 'lower'";if(n.some((function(e){return["NT","0*","1*","2*","3*","NT*"].includes(e)})))return"ND";var i=["0**","1**","2**","3**","4**","NT**"];return z.apply(void 0,n.map((function(e){return i.includes(e)?5:parseInt(e.replace(/\*/g,""))})))+(n.some((function(e){return i.includes(e)}))?"*":"")},G=function(e){var r=Object.values(e);if(r.some((function(e){return["NT","0*","NT*"].includes(e)})))return"ND";var n=["0**","1**","NT**"];return z.apply(void 0,r.map((function(e){return n.includes(e)?2:parseInt(e.replace(/\*/g,""))})))+(r.some((function(e){return n.includes(e)}))?"*":"")},H=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(e.includes("ND"))return"ND";var n=z.apply(void 0,e.map((function(e){return parseInt(e.replace(/\*/g,""))})));return n+(e.some((function(e){return e.includes("*")}))?"*":"")},J=function(e){var r=q(e.motor,"all");return{upperExtremity:q(e.motor,"upper"),lowerExtremity:q(e.motor,"lower"),lightTouch:G(e.lightTouch),pinPrick:G(e.pinPrick),motor:r}},Q=function(e){this.classification=B(e),this.totals=function(e){var r=J(e.left),n=J(e.right);return{left:r,right:n,upperExtremity:H(n.upperExtremity,r.upperExtremity),lowerExtremity:H(n.lowerExtremity,r.lowerExtremity),lightTouch:H(n.lightTouch,r.lightTouch),pinPrick:H(n.pinPrick,r.pinPrick)}}(e)};export{Q as ISNCSCI};
